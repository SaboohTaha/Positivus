---
interface Props {
    name: string;
    role: string;
    experience: string;
    image: string;
    linkedin: string;
    imagePos?: {
        width: string;
        height: string;
        top: string;
        left: string;
    };
}

import TeamImageMask from "@components/svgs/TeamImageMask.astro";

const {
    name,
    role,
    experience,
    image,
    linkedin,
    imagePos = { width: "100%", height: "100%", top: "0px", left: "0px" },
} = Astro.props;

// Create a unique ID for the clip path based on name
const clipId = `team-clip-${name.replace(/\s+/g, "-").toLowerCase()}`;
---

<div
    class="team-card bg-white border border-[#191A23] rounded-[45px] p-[40px] flex flex-col gap-[28px]"
    style="box-shadow: 0px 5px 0px #191A23;"
>
    <!-- Top: Info and Image -->
    <div class="flex flex-row items-end justify-between relative min-h-[103px]">
        <!-- Left Group: Picture + Name/Role -->
        <div
            class="flex flex-row md:flex-col lg:flex-col xl:flex-row items-end md:items-start lg:items-start xl:items-end gap-[15px] xl:gap-[20px] flex-1 min-w-0"
        >
            <!-- Picture Container — Figma: total bounds approx 105x103 -->
            <div class="relative w-[106px] h-[103px] shrink-0 overflow-visible">
                <TeamImageMask id={clipId} />

                <!-- Bottom Vector (The "Shadow" Shape) — Figma: #231F20, shifted pos -->
                <div
                    class="absolute w-[98px] h-[98px] bg-[#191A23]"
                    style={`
                    left: 6px; 
                    top: 5px;
                    clip-path: url(#${clipId});
                  `}
                >
                </div>

                <!-- Masked Image Layer — Figma: Green wash (#B9FF66) + Multiply -->
                <div
                    class="absolute w-[98px] h-[98px] left-0 top-0 bg-[#B9FF66]"
                    style={`
                    clip-path: url(#${clipId});
                  `}
                >
                    <img
                        src={image}
                        alt={name}
                        class="absolute max-w-none mix-blend-multiply"
                        style={`
                        width: ${imagePos.width};
                        height: ${imagePos.height};
                        top: ${imagePos.top};
                        left: ${imagePos.left};
                      `}
                    />
                </div>
            </div>

            <!-- Name and Role -->
            <div
                class="flex flex-col mb-[5px] min-w-0 pr-[35px] md:pr-0 xl:pr-0"
            >
                <h4
                    class="m-0 font-sans font-medium text-[20px] leading-[26px] text-black"
                >
                    {name}
                </h4>
                <p
                    class="m-0 font-sans font-normal text-[18px] leading-[23px] text-black"
                >
                    {role}
                </p>
            </div>
        </div>

        <!-- LinkedIn Icon -->
        <a href="#" class="absolute top-0 right-0 shrink-0 z-20">
            <img src={linkedin} alt="LinkedIn" class="w-[34px] h-[34px]" />
        </a>
    </div>

    <!-- Divider line -->
    <div class="w-full h-[1px] bg-black opacity-100"></div>

    <!-- Bio/Experience -->
    <p class="m-0 font-sans font-normal text-[18px] leading-[23px] text-black">
        {experience}
    </p>
</div>
